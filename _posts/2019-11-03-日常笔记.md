---
layout:     post
title:      日常笔记
subtitle:   萌新日常小笔记,随意更新！
date:       2019-11-03
author:     FormWeb
header-img: img/bg-note-web.jpeg
catalog: true
tags:
    - 日常笔记
---
### 删除所有小于100K的文件
```
find . -type f -size -100k -print | grep -v "jpg\|JPG" | xargs -0 -n1 rm -rf

find  -print 打印 prit0 不打印
size  +100 -100 100占空间大小 0c 100c文件大小
find  -type d文件夹 -empty空文件夹 f文件
grep  -v 排除指定字符
xargs -0 处理特定字符
```
```
find . -name "shuaige.txt" -exec rm -f {} ;  
```

### Fdupes查找删除重复文件并删除空目录
```
Fdupes 用法非常简单。仅运行下面的命令就可以在目录中找到重复文件，如：~/Downloads。  
$ fdupes ~/Downloads
我系统中的样例输出：
/home/sk/Downloads/Hyperledger.pdf 
/home/sk/Downloads/Hyperledger(1).pdf  
你可以看到，在 /home/sk/Downloads/ 目录下有一个重复文件。它仅显示了父级目录中的重复文件。如何显示子目录中的重复文件？像下面一样，使用 -r 选项。
$ fdupes -r ~/Downloads
现在你将看到 /home/sk/Downloads/ 目录以及子目录中的重复文件。

Fdupes 也可用来从多个目录中迅速查找重复文件。
$ fdupes ~/Downloads ~/Documents/ostechnix
你甚至可以搜索多个目录，递归搜索其中一个目录，如下：

$ fdupes ~/Downloads -r ~/Documents/ostechnix
上面的命令将搜索 ~/Downloads 目录，~/Documents/ostechnix 目录和它的子目录中的重复文件。

有时，你可能想要知道一个目录中重复文件的大小。你可以使用 -S 选项，如下：

$ fdupes -S ~/Downloads
403635 bytes each:
/home/sk/Downloads/Hyperledger.pdf
/home/sk/Downloads/Hyperledger(1).pdf
类似的，为了显示父目录和子目录中重复文件的大小，使用 -Sr 选项。

我们可以在计算时分别使用 -n 和 -A 选项排除空白文件以及排除隐藏文件。

$ fdupes -n ~/Downloads
$ fdupes -A ~/Downloads
在搜索指定目录的重复文件时，第一个命令将排除零长度文件，后面的命令将排除隐藏文件。

汇总重复文件信息，使用 -m 选项。

$ fdupes -m ~/Downloads
1 duplicate files (in 1 sets), occupying 403.6 kilobytes
删除所有重复文件，使用 -d 选项。

$ fdupes -d ~/Downloads
样例输出：

[1] /home/sk/Downloads/Hyperledger Fabric Installation.pdf
[2] /home/sk/Downloads/Hyperledger Fabric Installation(1).pdf

Set 1 of 1, preserve files [1 - 2, all]:
这个命令将提示你保留还是删除所有其他重复文件。输入任一号码保留相应的文件，并删除剩下的文件。当使用这个选项的时候需要更加注意。如果不小心，你可能会删除原文件。

如果你想要每次保留每个重复文件集合的第一个文件，且无提示的删除其他文件，使用 -dN 选项（不推荐）。

$ fdupes -dN ~/Downloads
当遇到重复文件时删除它们，使用 -I 标志。

$ fdupes -I ~/Downloads
关于 Fdupes 的更多细节，查看帮助部分和 man 页面。

$ fdupes --help
$ man fdupes
```
[原文地址](https://linux.cn/article-10123-1.html?pr)


### 文件内容查找和替换命令
<font size="2" color="gray">2019-11-04</font>  
几种常见的文件内容查找和替换命令
#### 1. 通过vim编辑器来替换
```
vi/vim 中可以使用 :s 命令来替换字符串。

:s/well/good/ 替换当前行第一个 well 为 good

:s/well/good/g 替换当前行所有 well 为 good

:n,$s/well/good/ 替换第 n 行开始到最后一行中每一行的第一个 well 为 good

:n,$s/well/good/g 替换第 n 行开始到最后一行中每一行所有 well 为 good n 为数字，若 n 为 .，表示从当前行开始到最后一行

:%s/well/good/（等同于 :g/well/s//good/） 替换每一行的第一个 well 为 good

:%s/well/good/g（等同于 :g/well/s//good/g） 替换每一行中所有 well 为 good 可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符

:s#well/#good/# 替换当前行第一个 well/ 为 good/

```
#### 2. sed和grep配合
```
sed -i s/yyyy/xxxx/g `grep yyyy -rl --include="*.txt" ./`

作用：将当前目录(包括子目录)中所有txt文件中的yyyy字符串替换为xxxx字符串。其中，

-i 表示操作的是文件，``括起来的grep命令，表示将grep命令的的结果作为操作文件。

s/yyyy/xxxx/表示查找yyyy并替换为xxxx，后面跟g表示一行中有多个yyyy的时候，都替换，而不是仅替换第一个

另外，如果不需要查找子目录，仅需要在当前目录替换，用sed命令就行了，命令如下：sed -i s/xxxx/yyyy/g ./*.txt

```
#### 3. find命令查找和替换
```
find -name '要查找的文件名' | xargs perl -pi -e 's|被替换的字符串|替换后的字符串|g'          #查找替换当前目录下包含字符串并进行替换

find -name '*.txt' | xargs perl -pi -e 's|被替换内容|替换内容|g'             #递归查找替换

find . -type f -name '*.html' | xargs perl -pi -e 's|被替换内容|替换内容|g'

```
我用到的：  

```
find . -type f -name '*.html' | xargs perl -pi -e 's/utf-8/iso-8859-1/g'  
```
[原文链接](https://blog.csdn.net/qq_25992179/article/details/82777486)


### wget整站克隆仿站
<font size="2" color="gray">2019-11-03</font>  
通过如下命令可以整个网站的源码下载到本地
```
$ wget -r -p -np -k www.avatrade.cn
```
Wget参数说明:   
```
-r --recursive（递归） specify recursive download.（指定递归下载）
-k --convert-links（转换链接） make links in downloaded HTML point to local files.（将下载的HTML页面中的链接转换为相对链接即本地链接）
-p --page-requisites（页面必需元素） get all images, etc. needed to display HTML page.（下载所有的图片等页面显示所需的内容）
-np --no-parent（不追溯至父级） don't ascend to the parent directory.

这里写代码片额外参数：

-nc  断点续传
-o   生成日志文件
```  
[原文链接](https://blog.csdn.net/qq_28590879/article/details/79849307)

### ffmpeg转码
```
ffmpeg -i in.rm -c:v h264 -c:a aac "out.mp4"
```