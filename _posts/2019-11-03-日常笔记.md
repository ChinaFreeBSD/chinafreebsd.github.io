---
layout:     post
title:      日常笔记
subtitle:   wget 整站克隆/仿站 教程
date:       2019-11-03
author:     FormWeb
header-img: img/bg-note-web.jpeg
catalog: true
tags:
    - 日常笔记
---
### 文件内容查找和替换命令
<font size="2" color="gray">2019-11-03</font>  
几种常见的文件内容查找和替换命令
#### 1. 通过vim编辑器来替换
```
vi/vim 中可以使用 :s 命令来替换字符串。

:s/well/good/ 替换当前行第一个 well 为 good

:s/well/good/g 替换当前行所有 well 为 good

:n,$s/well/good/ 替换第 n 行开始到最后一行中每一行的第一个 well 为 good

:n,$s/well/good/g 替换第 n 行开始到最后一行中每一行所有 well 为 good n 为数字，若 n 为 .，表示从当前行开始到最后一行

:%s/well/good/（等同于 :g/well/s//good/） 替换每一行的第一个 well 为 good

:%s/well/good/g（等同于 :g/well/s//good/g） 替换每一行中所有 well 为 good 可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符

:s#well/#good/# 替换当前行第一个 well/ 为 good/

```
#### 2. sed和grep配合
```
sed -i s/yyyy/xxxx/g `grep yyyy -rl --include="*.txt" ./`

作用：将当前目录(包括子目录)中所有txt文件中的yyyy字符串替换为xxxx字符串。其中，

-i 表示操作的是文件，``括起来的grep命令，表示将grep命令的的结果作为操作文件。

s/yyyy/xxxx/表示查找yyyy并替换为xxxx，后面跟g表示一行中有多个yyyy的时候，都替换，而不是仅替换第一个

另外，如果不需要查找子目录，仅需要在当前目录替换，用sed命令就行了，命令如下：sed -i s/xxxx/yyyy/g ./*.txt

```
#### 3. find命令查找和替换
```
find -name '要查找的文件名' | xargs perl -pi -e 's|被替换的字符串|替换后的字符串|g'          #查找替换当前目录下包含字符串并进行替换

find -name '*.txt' | xargs perl -pi -e 's|被替换内容|替换内容|g'             #递归查找替换

find . -type f -name '*.html' | xargs perl -pi -e 's|被替换内容|替换内容|g'

```

### wget整站克隆仿站
<font size="2" color="gray">2019-11-03</font>  
通过如下命令可以整个网站的源码下载到本地
```
$ wget -r -p -np -k www.avatrade.cn
```
Wget参数说明：  
```
-r --recursive（递归） specify recursive download.（指定递归下载）
-k --convert-links（转换链接） make links in downloaded HTML point to local files.（将下载的HTML页面中的链接转换为相对链接即本地链接）
-p --page-requisites（页面必需元素） get all images, etc. needed to display HTML page.（下载所有的图片等页面显示所需的内容）
-np --no-parent（不追溯至父级） don't ascend to the parent directory.

这里写代码片额外参数：

-nc  断点续传
-o   生成日志文件
```
[原文链接](https://blog.csdn.net/qq_28590879/article/details/79849307)


